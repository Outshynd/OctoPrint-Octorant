<h3>{{ _('Discord settings') }}</h3>
<form class="form-horizontal">
    <div class="control-group">
        <label class="control-label">{{ _('Webhook URL') }}</label>
        <div class="controls">
            <input type="text" class="input-block-level" data-bind="value: settings.settings.plugins.octorant.url">
        </div>
    </div>
    <div class="control-group">
        <label class="control-label">{{ _('Bot Name') }}</label>
        <div class="controls">
            <input type="text" class="input-block-level" data-bind="value: settings.settings.plugins.octorant.username">
        </div>
    </div>
    <div class="control-group">
        <label class="control-label">{{ _('Bot Avatar URL') }}</label>
        <div class="controls">
            <input type="text" class="input-block-level" data-bind="value: settings.settings.plugins.octorant.avatar">
        </div>
    </div>
    <div style="clear:both">
        <small>{{ _("If you modify these settings, a test message will be sent to the Discord channel.") }}</small>
    </div>
</form>
<h3>{{ _('Messages settings') }}</h3>
<div>
    <form class="form-horizontal"  data-bind="foreach: {data: categories, as: 'category', noChildContext: true}">
        <h4>
            <span data-bind="text: category"></span>
        </h4>
        <div class="octorant_category" data-bind="foreach: {data: Object.keys(events), as:'id', noChildContext: true}">
            
            <!-- ko if: (events[id].category && events[id].category() === category) -->
            <div class="octorant_message" data-bind="css: {inactive: (events[id].enabled() == false)}">
                <h5>
                    <input type="checkbox" class="" data-bind="checked: events[id].enabled"/>
                    <span data-bind="text: events[id].name"></span>
                </h5>
                <div data-bind="visible: events[id].enabled">
                    <div class="control-group">
                        <label class="control-label">{{ _("Message") }}</label>
                        <div class="controls">
                            <input type="text" class="input-block-level" data-bind="value: events[id].message"/>
                        </div>
                    </div>
                    <div class="control-group" data-bind="if: events[id].medias_list().length > 0">
                        <label class="control-label">{{ _("Include media") }}</label>
                        <div class="controls">
                            <label class="radio">
                                <input type="radio" value="none" data-bind="checked: events[id].media"/>
                                {{ _("None") }}
                            </label>
                            <!-- ko if: events[id].medias_list().lastIndexOf('thumbnail') > -1 -->
                            <label class="radio">
                                <input type="radio" value="thumbnail" data-bind="checked: events[id].media" />
                                {{ _("GCode Thumbnail") }}
                            </label>
                            <!-- /ko -->
                            <!-- ko if: events[id].medias_list().lastIndexOf('snapshot') > -1 -->
                            <label class="radio">
                                <input type="radio" value="snapshot"  data-bind="checked: events[id].media" />
                                {{ _("Webcam snapshot") }}
                            </label>                            
                            <!-- /ko -->
                            <!-- ko if: events[id].medias_list().lastIndexOf('timelapse') > -1 -->
                            <label class="radio">
                                <input type="radio" value="timelapse" data-bind="checked: events[id].media" />
                                {{ _("Timelapse") }}
                            </label>
                            <!-- /ko -->
                        </div>
                    </div>
                    <div class="control-group" data-bind="if: events[id].step">
                        <label class="control-label">{{ _("Notify every") }}</label>
                        <div class="controls">
                            <div class="input-append">
                                <input type="number" min="1" max="100" step="1" data-bind="value: events[id].step"/>
                                <span class="add-on" data-bind="text: events[id].step_unit"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /ko -->
        </div>
    </form>
</div>
<h3>Scripts settings</h3>
<form class="form-horizontal">
    <div style="clear:both">
        <p>{{ _("To modify these settings, you need to set") }} <code>allow_scripts: true</code> {{ _("in your configuration file.") }}</p>
    </div>
    <div  data-bind="visible: settings.settings.plugins.octorant.allow_scripts">
        <div class="control-group">
            <label class="control-label">{{ _('Before message, start:') }}</label>
            <div class="controls">
                <input type="text" class="input-block-level" data-bind="value: settings.settings.plugins.octorant.script_before">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">{{ _('After message, start:') }}</label>
            <div class="controls">
                <input type="text" class="input-block-level" data-bind="value: settings.settings.plugins.octorant.script_after">
            </div>
        </div>
        <div style="clear:both">
            <p>
                {{ _("Here you can specify a file to be executed <strong>before</strong> and <strong>after</strong> each message is sent to Discord.") }} 
                {{ _("<strong>The file should be executable by the user under which OctoPrint is running</strong>") }}
            </p>
        </div>
    </div>
</form>
